{"task_id":"task_01","variant":"correct_basic","input_prompt":"Add a togglePause(state) function to pause.ts that flips the paused boolean. Export from index.","expected_output":"--- a/src/systems/pause.ts\n+++ b/src/systems/pause.ts\n@@ -25,3 +25,13 @@\n export function resumeGame(state: GameState): GameState {\n   return { ...state, paused: false };\n }\n+\n+/**\n+ * Toggles the paused state.\n+ */\n+export function togglePause(state: GameState): GameState {\n+  return { ...state, paused: !state.paused };\n+}\n--- a/src/index.ts\n+++ b/src/index.ts\n@@ -3,3 +3,4 @@\n export { isPaused, pauseGame, resumeGame } from \"./systems/pause.js\";\n+export { togglePause } from \"./systems/pause.js\";","metadata":{"quality":"gold","difficulty":"easy","concepts":["pure_function","spread_operator","boolean_toggle"]}}
{"task_id":"task_01","variant":"correct_concise","input_prompt":"Implement togglePause that returns new state with flipped paused field.","expected_output":"--- a/src/systems/pause.ts\n+++ b/src/systems/pause.ts\n@@ -25,3 +25,7 @@\n export function resumeGame(state: GameState): GameState {\n   return { ...state, paused: false };\n }\n+\n+export function togglePause(state: GameState): GameState {\n+  return { ...state, paused: !state.paused };\n+}","metadata":{"quality":"gold","difficulty":"easy","concepts":["pure_function","spread_operator"]}}
{"task_id":"task_01","variant":"mutation_bug","input_prompt":"Add togglePause to pause system.","expected_output":"--- a/src/systems/pause.ts\n+++ b/src/systems/pause.ts\n@@ -25,3 +25,7 @@\n+\n+export function togglePause(state: GameState): GameState {\n+  state.paused = !state.paused;\n+  return state;\n+}","metadata":{"quality":"bad","difficulty":"easy","error_type":"mutation","description":"Mutates input state instead of creating new object"}}
{"task_id":"task_01","variant":"missing_export","input_prompt":"Create togglePause in pause.ts.","expected_output":"--- a/src/systems/pause.ts\n+++ b/src/systems/pause.ts\n@@ -25,3 +25,7 @@\n+\n+export function togglePause(state: GameState): GameState {\n+  return { ...state, paused: !state.paused };\n+}","metadata":{"quality":"partial","difficulty":"easy","error_type":"missing_index_export","description":"Function added but not exported from index.ts"}}
{"task_id":"task_01","variant":"wrong_file","input_prompt":"Add pause toggle functionality.","expected_output":"--- a/src/core/gameState.ts\n+++ b/src/core/gameState.ts\n@@ -89,6 +89,9 @@\n+    case \"TOGGLE_PAUSE\":\n+      return { ...state, paused: !state.paused };","metadata":{"quality":"bad","difficulty":"easy","error_type":"wrong_approach","description":"Added to reducer instead of as standalone function"}}
{"task_id":"task_02","variant":"correct_basic","input_prompt":"Add remapKey(state, action, newKeyCode) to input.ts. Returns new state with updated inputMap. If action doesn't exist, return unchanged.","expected_output":"--- a/src/systems/input.ts\n+++ b/src/systems/input.ts\n@@ -55,3 +55,16 @@\n+\n+export function remapKey(state: GameState, action: string, newKeyCode: string): GameState {\n+  if (!(action in state.inputMap)) {\n+    return state;\n+  }\n+  return {\n+    ...state,\n+    inputMap: { ...state.inputMap, [action]: newKeyCode },\n+  };\n+}","metadata":{"quality":"gold","difficulty":"easy","concepts":["computed_property","spread_operator","immutable_update"]}}
{"task_id":"task_02","variant":"correct_alternative","input_prompt":"Implement input remapping function.","expected_output":"--- a/src/systems/input.ts\n+++ b/src/systems/input.ts\n@@ -55,3 +55,14 @@\n+\n+export function remapKey(state: GameState, action: string, newKeyCode: string): GameState {\n+  if (!Object.prototype.hasOwnProperty.call(state.inputMap, action)) {\n+    return state;\n+  }\n+  const newInputMap = { ...state.inputMap };\n+  newInputMap[action] = newKeyCode;\n+  return { ...state, inputMap: newInputMap };\n+}","metadata":{"quality":"gold","difficulty":"easy","concepts":["hasOwnProperty","immutable_update"]}}
{"task_id":"task_02","variant":"mutation_bug","input_prompt":"Add key remapping to input system.","expected_output":"--- a/src/systems/input.ts\n+++ b/src/systems/input.ts\n@@ -55,3 +55,9 @@\n+\n+export function remapKey(state: GameState, action: string, newKeyCode: string): GameState {\n+  state.inputMap[action] = newKeyCode;\n+  return state;\n+}","metadata":{"quality":"bad","difficulty":"easy","error_type":"mutation","description":"Mutates state.inputMap directly, no existence check"}}
{"task_id":"task_02","variant":"no_guard","input_prompt":"Create remapKey function for input.ts.","expected_output":"--- a/src/systems/input.ts\n+++ b/src/systems/input.ts\n@@ -55,3 +55,10 @@\n+\n+export function remapKey(state: GameState, action: string, newKeyCode: string): GameState {\n+  return {\n+    ...state,\n+    inputMap: { ...state.inputMap, [action]: newKeyCode },\n+  };\n+}","metadata":{"quality":"partial","difficulty":"easy","error_type":"missing_guard","description":"Missing check for non-existent action"}}
{"task_id":"task_02","variant":"wrong_type","input_prompt":"Implement key remapping.","expected_output":"--- a/src/systems/input.ts\n+++ b/src/systems/input.ts\n@@ -55,3 +55,8 @@\n+\n+export function remapKey(action: string, newKeyCode: string): Record<string, string> {\n+  return { [action]: newKeyCode };\n+}","metadata":{"quality":"bad","difficulty":"easy","error_type":"wrong_signature","description":"Wrong function signature - doesn't take/return GameState"}}
{"task_id":"task_03","variant":"correct_basic","input_prompt":"Add addComboScore(state, basePoints, streak) to score.ts. Multiplier = 1 + Math.floor(streak/5)*0.5, capped at 3.0x. Update player combo to streak.","expected_output":"--- a/src/systems/score.ts\n+++ b/src/systems/score.ts\n@@ -47,3 +47,20 @@\n+\n+export function addComboScore(state: GameState, basePoints: number, streak: number): GameState {\n+  if (state.paused) return state;\n+  const rawMultiplier = 1 + Math.floor(streak / 5) * 0.5;\n+  const multiplier = Math.min(rawMultiplier, 3.0);\n+  const points = Math.round(basePoints * multiplier);\n+  return {\n+    ...state,\n+    player: {\n+      ...state.player,\n+      score: state.player.score + points,\n+      combo: streak,\n+    },\n+  };\n+}","metadata":{"quality":"gold","difficulty":"medium","concepts":["math_formula","capping","pause_guard","combo_system"]}}
{"task_id":"task_03","variant":"correct_verbose","input_prompt":"Implement score combo multiplier system with streak-based scaling.","expected_output":"--- a/src/systems/score.ts\n+++ b/src/systems/score.ts\n@@ -47,3 +47,25 @@\n+\n+/**\n+ * Adds score with combo multiplier based on streak.\n+ * Multiplier formula: 1 + Math.floor(streak / 5) * 0.5\n+ * Capped at 3.0x maximum.\n+ */\n+export function addComboScore(state: GameState, basePoints: number, streak: number): GameState {\n+  if (state.paused) return state;\n+\n+  const comboLevel = Math.floor(streak / 5);\n+  const rawMultiplier = 1 + comboLevel * 0.5;\n+  const multiplier = Math.min(rawMultiplier, 3.0);\n+  const finalPoints = Math.round(basePoints * multiplier);\n+\n+  return {\n+    ...state,\n+    player: {\n+      ...state.player,\n+      score: state.player.score + finalPoints,\n+      combo: streak,\n+    },\n+  };\n+}","metadata":{"quality":"gold","difficulty":"medium","concepts":["math_formula","capping"]}}
{"task_id":"task_03","variant":"no_cap_bug","input_prompt":"Add combo scoring to score system.","expected_output":"--- a/src/systems/score.ts\n+++ b/src/systems/score.ts\n@@ -47,3 +47,15 @@\n+\n+export function addComboScore(state: GameState, basePoints: number, streak: number): GameState {\n+  if (state.paused) return state;\n+  const multiplier = 1 + Math.floor(streak / 5) * 0.5;\n+  const points = Math.round(basePoints * multiplier);\n+  return {\n+    ...state,\n+    player: { ...state.player, score: state.player.score + points, combo: streak },\n+  };\n+}","metadata":{"quality":"bad","difficulty":"medium","error_type":"missing_cap","description":"Missing 3.0x multiplier cap"}}
{"task_id":"task_03","variant":"no_pause_guard","input_prompt":"Implement addComboScore function.","expected_output":"--- a/src/systems/score.ts\n+++ b/src/systems/score.ts\n@@ -47,3 +47,15 @@\n+\n+export function addComboScore(state: GameState, basePoints: number, streak: number): GameState {\n+  const multiplier = Math.min(1 + Math.floor(streak / 5) * 0.5, 3.0);\n+  const points = Math.round(basePoints * multiplier);\n+  return {\n+    ...state,\n+    player: { ...state.player, score: state.player.score + points, combo: streak },\n+  };\n+}","metadata":{"quality":"partial","difficulty":"medium","error_type":"missing_pause_guard","description":"Doesn't check paused state"}}
{"task_id":"task_03","variant":"wrong_formula","input_prompt":"Add streak multiplier scoring.","expected_output":"--- a/src/systems/score.ts\n+++ b/src/systems/score.ts\n@@ -47,3 +47,13 @@\n+\n+export function addComboScore(state: GameState, basePoints: number, streak: number): GameState {\n+  if (state.paused) return state;\n+  const multiplier = Math.min(streak * 0.1 + 1, 3.0);\n+  return {\n+    ...state,\n+    player: { ...state.player, score: state.player.score + Math.round(basePoints * multiplier), combo: streak },\n+  };\n+}","metadata":{"quality":"bad","difficulty":"medium","error_type":"wrong_formula","description":"Wrong multiplier formula (linear instead of step-based)"}}
{"task_id":"task_04","variant":"correct_basic","input_prompt":"Add patrolRadius to Enemy interface. Modify updateEnemyAI to use patrol mode when enemy is far from player. Add chaseThreshold parameter.","expected_output":"--- a/src/core/gameState.ts\n+++ b/src/core/gameState.ts\n@@ -11,6 +11,7 @@\n export interface Enemy {\n   id: string;\n   position: Vec2;\n   speed: number;\n   hp: number;\n   maxHp: number;\n+  patrolRadius: number;\n   state: \"idle\" | \"patrol\" | \"chase\" | \"dead\";\n }\n--- a/src/systems/enemyAI.ts\n+++ b/src/systems/enemyAI.ts\n@@ -20,7 +20,7 @@\n-export function updateEnemyAI(enemy: Enemy, playerPos: Vec2): Enemy {\n+export function updateEnemyAI(enemy: Enemy, playerPos: Vec2, chaseThreshold: number = 100): Enemy {\n   if (enemy.state === \"dead\") return enemy;\n-  const dist = distance(enemy.position, playerPos);\n-  if (dist < 100) {\n+  const dist = distance(enemy.position, playerPos);\n+  if (dist < chaseThreshold) {\n     return { ...enemy, state: \"chase\" };\n   }\n-  return { ...enemy, state: \"idle\" };\n+  return { ...enemy, state: \"patrol\" };\n }\n@@ -60,5 +60,6 @@\n export function createEnemy(id: string, x: number, y: number): Enemy {\n   return {\n     id, position: { x, y }, speed: 2,\n-    hp: 30, maxHp: 30, state: \"idle\",\n+    hp: 30, maxHp: 30, patrolRadius: 50, state: \"idle\",\n   };\n }","metadata":{"quality":"gold","difficulty":"medium","concepts":["interface_extension","default_parameter","state_machine"]}}
{"task_id":"task_04","variant":"correct_alternative","input_prompt":"Implement enemy patrol behavior with customizable chase distance.","expected_output":"--- a/src/core/gameState.ts\n+++ b/src/core/gameState.ts\n@@ -11,6 +11,7 @@\n export interface Enemy {\n   id: string;\n   position: Vec2;\n   speed: number;\n   hp: number;\n   maxHp: number;\n+  patrolRadius: number;\n   state: \"idle\" | \"patrol\" | \"chase\" | \"dead\";\n }","metadata":{"quality":"gold","difficulty":"medium","concepts":["interface_extension","state_machine"]}}
{"task_id":"task_04","variant":"missing_interface","input_prompt":"Add patrol mode to enemy AI.","expected_output":"--- a/src/systems/enemyAI.ts\n+++ b/src/systems/enemyAI.ts\n@@ -20,7 +20,7 @@\n-export function updateEnemyAI(enemy: Enemy, playerPos: Vec2): Enemy {\n+export function updateEnemyAI(enemy: Enemy, playerPos: Vec2, chaseThreshold: number = 100): Enemy {\n   if (dist < 100) {\n-  return { ...enemy, state: \"idle\" };\n+  return { ...enemy, state: \"patrol\" };","metadata":{"quality":"partial","difficulty":"medium","error_type":"missing_interface_change","description":"Forgot to add patrolRadius to Enemy interface"}}
{"task_id":"task_04","variant":"hardcoded_threshold","input_prompt":"Make enemies patrol when player is far away.","expected_output":"--- a/src/systems/enemyAI.ts\n+++ b/src/systems/enemyAI.ts\n@@ -23,5 +23,5 @@\n-  return { ...enemy, state: \"idle\" };\n+  return { ...enemy, state: \"patrol\" };","metadata":{"quality":"bad","difficulty":"medium","error_type":"no_threshold_param","description":"Changed idle to patrol but didn't add chaseThreshold parameter"}}
{"task_id":"task_04","variant":"wrong_default","input_prompt":"Implement enemy patrol with chase threshold.","expected_output":"--- a/src/systems/enemyAI.ts\n+++ b/src/systems/enemyAI.ts\n@@ -20,7 +20,7 @@\n-export function updateEnemyAI(enemy: Enemy, playerPos: Vec2): Enemy {\n+export function updateEnemyAI(enemy: Enemy, playerPos: Vec2, chaseThreshold: number = 50): Enemy {\n   if (dist < chaseThreshold) {\n     return { ...enemy, state: \"chase\" };\n   }\n-  return { ...enemy, state: \"idle\" };\n+  return { ...enemy, state: \"patrol\" };","metadata":{"quality":"bad","difficulty":"medium","error_type":"wrong_default","description":"chaseThreshold defaults to 50 instead of specified 100"}}
{"task_id":"task_05","variant":"correct_basic","input_prompt":"Update save system to V2 with metadata field. Handle backward compat for V1 saves.","expected_output":"--- a/src/systems/save.ts\n+++ b/src/systems/save.ts\n@@ -1,5 +1,12 @@\n export interface SaveData {\n   version: number;\n   state: GameState;\n }\n+\n+export interface SaveDataV2 extends SaveData {\n+  metadata: {\n+    playTime: number;\n+    saveSlot: number;\n+  };\n+}\n@@ -20,7 +27,11 @@\n export function serializeState(state: GameState): string {\n-  const data: SaveData = { version: 1, state };\n+  const data: SaveDataV2 = {\n+    version: 2,\n+    state,\n+    metadata: { playTime: 0, saveSlot: 0 },\n+  };\n   return JSON.stringify(data);\n }\n@@ -30,6 +41,12 @@\n export function deserializeState(json: string): GameState | null {\n   const data = JSON.parse(json);\n-  if (!data || data.version !== 1) return null;\n+  if (!data) return null;\n+  if (data.version === 1 || data.version === 2) {\n+    return data.state;\n+  }\n+  return null;\n }\n@@ -55,3 +72,3 @@\n export function getCurrentVersion(): number {\n-  return 1;\n+  return 2;\n }","metadata":{"quality":"gold","difficulty":"medium","concepts":["backward_compatibility","interface_extension","versioning"]}}
{"task_id":"task_05","variant":"correct_strict","input_prompt":"Implement save system version 2 with metadata.","expected_output":"--- a/src/systems/save.ts\n+++ b/src/systems/save.ts\n@@ -1,5 +1,14 @@\n+export interface SaveMetadata {\n+  playTime: number;\n+  saveSlot: number;\n+}\n+\n+export interface SaveDataV2 {\n+  version: 2;\n+  state: GameState;\n+  metadata: SaveMetadata;\n+}","metadata":{"quality":"gold","difficulty":"medium","concepts":["literal_type","interface_design"]}}
{"task_id":"task_05","variant":"breaks_v1","input_prompt":"Add V2 save format with metadata.","expected_output":"--- a/src/systems/save.ts\n+++ b/src/systems/save.ts\n@@ -30,6 +30,6 @@\n export function deserializeState(json: string): GameState | null {\n   const data = JSON.parse(json);\n-  if (!data || data.version !== 1) return null;\n+  if (!data || data.version !== 2) return null;\n   return data.state;\n }","metadata":{"quality":"bad","difficulty":"medium","error_type":"breaks_backward_compat","description":"V1 saves will fail to load"}}
{"task_id":"task_05","variant":"no_metadata_defaults","input_prompt":"Create SaveDataV2 with playTime and saveSlot metadata.","expected_output":"--- a/src/systems/save.ts\n+++ b/src/systems/save.ts\n@@ -20,3 +20,3 @@\n-  const data: SaveData = { version: 1, state };\n+  const data = { version: 2, state, metadata: {} };","metadata":{"quality":"bad","difficulty":"medium","error_type":"empty_metadata","description":"Metadata fields not initialized with defaults"}}
{"task_id":"task_05","variant":"partial_compat","input_prompt":"Upgrade save system to version 2.","expected_output":"--- a/src/systems/save.ts\n+++ b/src/systems/save.ts\n@@ -30,6 +30,8 @@\n export function deserializeState(json: string): GameState | null {\n   const data = JSON.parse(json);\n-  if (!data || data.version !== 1) return null;\n+  if (!data) return null;\n+  if (data.version === 2) return data.state;\n+  if (data.version === 1) return data.state;\n   return null;\n }","metadata":{"quality":"partial","difficulty":"medium","error_type":"missing_metadata_handling","description":"Loads V1 but doesn't add default metadata to loaded state"}}
{"task_id":"task_06","variant":"correct_basic","input_prompt":"Add getDifficultySpeedMultiplier(difficulty) to enemyAI. Formula: 0.5 + (difficulty/10)*1.5. Apply to enemy movement.","expected_output":"--- a/src/systems/enemyAI.ts\n+++ b/src/systems/enemyAI.ts\n@@ -1,3 +1,10 @@\n+/**\n+ * Returns speed multiplier based on difficulty (1-10).\n+ * Formula: 0.5 + (difficulty / 10) * 1.5\n+ */\n+export function getDifficultySpeedMultiplier(difficulty: number): number {\n+  return 0.5 + (difficulty / 10) * 1.5;\n+}","metadata":{"quality":"gold","difficulty":"medium","concepts":["linear_formula","difficulty_scaling","movement_system"]}}
{"task_id":"task_06","variant":"correct_integrated","input_prompt":"Implement difficulty-based enemy speed scaling.","expected_output":"--- a/src/systems/enemyAI.ts\n+++ b/src/systems/enemyAI.ts\n@@ -1,3 +1,7 @@\n+export function getDifficultySpeedMultiplier(difficulty: number): number {\n+  return 0.5 + (difficulty / 10) * 1.5;\n+}\n+\n@@ -25,5 +29,6 @@\n   if (dist < 100) {\n+    const speedMult = getDifficultySpeedMultiplier(state.settings.difficulty);","metadata":{"quality":"gold","difficulty":"medium","concepts":["integration","difficulty_scaling"]}}
{"task_id":"task_06","variant":"wrong_formula","input_prompt":"Add speed multiplier based on difficulty level.","expected_output":"--- a/src/systems/enemyAI.ts\n+++ b/src/systems/enemyAI.ts\n@@ -1,3 +1,5 @@\n+export function getDifficultySpeedMultiplier(difficulty: number): number {\n+  return difficulty * 0.2;\n+}","metadata":{"quality":"bad","difficulty":"medium","error_type":"wrong_formula","description":"Wrong formula (difficulty*0.2 instead of 0.5+(difficulty/10)*1.5)"}}
{"task_id":"task_06","variant":"no_integration","input_prompt":"Create getDifficultySpeedMultiplier function.","expected_output":"--- a/src/systems/enemyAI.ts\n+++ b/src/systems/enemyAI.ts\n@@ -1,3 +1,5 @@\n+export function getDifficultySpeedMultiplier(difficulty: number): number {\n+  return 0.5 + (difficulty / 10) * 1.5;\n+}","metadata":{"quality":"partial","difficulty":"medium","error_type":"no_integration","description":"Function created but not applied to enemy movement"}}
{"task_id":"task_06","variant":"hardcoded","input_prompt":"Make enemies faster at higher difficulty.","expected_output":"--- a/src/systems/enemyAI.ts\n+++ b/src/systems/enemyAI.ts\n@@ -25,5 +25,7 @@\n   if (dist < 100) {\n-    return { ...enemy, state: \"chase\" };\n+    const speed = difficulty > 5 ? 2 : 1;\n+    return { ...enemy, state: \"chase\", speed };","metadata":{"quality":"bad","difficulty":"medium","error_type":"hardcoded_threshold","description":"Hardcoded speed values instead of formula"}}
{"task_id":"task_07","variant":"correct_basic","input_prompt":"Create src/systems/eventLog.ts with GameEvent, createEventLog, logEvent, getRecentEvents. Add eventLog to GameState.","expected_output":"--- /dev/null\n+++ b/src/systems/eventLog.ts\n@@ -0,0 +1,30 @@\n+export interface GameEvent {\n+  type: string;\n+  timestamp: number;\n+  data?: unknown;\n+}\n+\n+export interface EventLog {\n+  events: GameEvent[];\n+  maxSize: number;\n+}\n+\n+export function createEventLog(maxSize: number = 50): EventLog {\n+  return { events: [], maxSize };\n+}\n+\n+export function logEvent(log: EventLog, event: GameEvent): EventLog {\n+  const events = [...log.events, event];\n+  if (events.length > log.maxSize) {\n+    events.splice(0, events.length - log.maxSize);\n+  }\n+  return { ...log, events };\n+}\n+\n+export function getRecentEvents(log: EventLog, count: number): GameEvent[] {\n+  return log.events.slice(-count);\n+}","metadata":{"quality":"gold","difficulty":"hard","concepts":["new_file","FIFO_queue","interface_design","immutable_operations"]}}
{"task_id":"task_07","variant":"correct_with_state","input_prompt":"Implement event logging system with GameState integration.","expected_output":"Creates eventLog.ts with proper types, FIFO behavior, and adds eventLog field to GameState interface and createInitialState.","metadata":{"quality":"gold","difficulty":"hard","concepts":["multi_file_patch","state_integration"]}}
{"task_id":"task_07","variant":"mutation_bug","input_prompt":"Add event log to game.","expected_output":"--- /dev/null\n+++ b/src/systems/eventLog.ts\n@@ -0,0 +1,20 @@\n+export function logEvent(log, event) {\n+  log.events.push(event);\n+  if (log.events.length > log.maxSize) {\n+    log.events.shift();\n+  }\n+  return log;\n+}","metadata":{"quality":"bad","difficulty":"hard","error_type":"mutation","description":"Mutates events array with push/shift instead of returning new array"}}
{"task_id":"task_07","variant":"no_trim","input_prompt":"Create event logging for game events.","expected_output":"--- /dev/null\n+++ b/src/systems/eventLog.ts\n@@ -0,0 +1,15 @@\n+export function createEventLog(maxSize = 50) {\n+  return { events: [], maxSize };\n+}\n+export function logEvent(log, event) {\n+  return { ...log, events: [...log.events, event] };\n+}","metadata":{"quality":"partial","difficulty":"hard","error_type":"no_maxsize_trim","description":"Doesn't enforce maxSize limit when adding events"}}
{"task_id":"task_07","variant":"missing_gamestate","input_prompt":"Add event log system to the game.","expected_output":"Creates eventLog.ts correctly but forgets to add eventLog field to GameState interface in gameState.ts","metadata":{"quality":"partial","difficulty":"hard","error_type":"missing_state_integration","description":"Module works standalone but not integrated into GameState"}}
{"task_id":"task_08","variant":"correct_basic","input_prompt":"Create src/systems/cooldown.ts with CooldownEntry, createCooldownManager, startCooldown, tickCooldowns, isOnCooldown, getCooldownRemaining.","expected_output":"--- /dev/null\n+++ b/src/systems/cooldown.ts\n@@ -0,0 +1,40 @@\n+export interface CooldownEntry {\n+  name: string;\n+  durationTicks: number;\n+  remainingTicks: number;\n+}\n+\n+export function createCooldownManager(): CooldownEntry[] {\n+  return [];\n+}\n+\n+export function startCooldown(manager: CooldownEntry[], name: string, durationTicks: number): CooldownEntry[] {\n+  const existing = manager.findIndex(e => e.name === name);\n+  const entry: CooldownEntry = { name, durationTicks, remainingTicks: durationTicks };\n+  if (existing >= 0) {\n+    return manager.map((e, i) => i === existing ? entry : e);\n+  }\n+  return [...manager, entry];\n+}\n+\n+export function tickCooldowns(manager: CooldownEntry[]): CooldownEntry[] {\n+  return manager.map(e => ({\n+    ...e,\n+    remainingTicks: Math.max(0, e.remainingTicks - 1),\n+  }));\n+}\n+\n+export function isOnCooldown(manager: CooldownEntry[], name: string): boolean {\n+  const entry = manager.find(e => e.name === name);\n+  return entry ? entry.remainingTicks > 0 : false;\n+}\n+\n+export function getCooldownRemaining(manager: CooldownEntry[], name: string): number {\n+  const entry = manager.find(e => e.name === name);\n+  return entry ? entry.remainingTicks : 0;\n+}","metadata":{"quality":"gold","difficulty":"medium","concepts":["array_immutable_ops","find_index","map_transform"]}}
{"task_id":"task_08","variant":"correct_alternative","input_prompt":"Implement ability cooldown tracking system.","expected_output":"Uses Map-based approach or filter+concat for immutable operations","metadata":{"quality":"gold","difficulty":"medium","concepts":["alternative_data_structure"]}}
{"task_id":"task_08","variant":"mutation_bug","input_prompt":"Add cooldown mechanism for abilities.","expected_output":"--- /dev/null\n+++ b/src/systems/cooldown.ts\n@@ -0,0 +1,20 @@\n+export function startCooldown(manager, name, duration) {\n+  const existing = manager.find(e => e.name === name);\n+  if (existing) {\n+    existing.durationTicks = duration;\n+    existing.remainingTicks = duration;\n+  } else {\n+    manager.push({ name, durationTicks: duration, remainingTicks: duration });\n+  }\n+  return manager;\n+}","metadata":{"quality":"bad","difficulty":"medium","error_type":"mutation","description":"Mutates existing entries and array with push"}}
{"task_id":"task_08","variant":"negative_tick","input_prompt":"Create cooldown timer system.","expected_output":"--- /dev/null\n+++ b/src/systems/cooldown.ts\n@@ -0,0 +1,10 @@\n+export function tickCooldowns(manager) {\n+  return manager.map(e => ({ ...e, remainingTicks: e.remainingTicks - 1 }));\n+}","metadata":{"quality":"bad","difficulty":"medium","error_type":"negative_remaining","description":"remainingTicks can go negative (no Math.max(0,...) guard)"}}
{"task_id":"task_08","variant":"missing_types","input_prompt":"Build cooldown tracking.","expected_output":"Implements all functions correctly but without TypeScript types (uses any/untyped)","metadata":{"quality":"partial","difficulty":"medium","error_type":"missing_types","description":"Functional but no TypeScript interfaces"}}
{"task_id":"task_09","variant":"correct_basic","input_prompt":"Create src/systems/rng.ts with mulberry32 PRNG. createRNG(seed) returns callable. Add randomInt(rng, min, max) and randomChoice(rng, array).","expected_output":"--- /dev/null\n+++ b/src/systems/rng.ts\n@@ -0,0 +1,30 @@\n+export function createRNG(seed: number): () => number {\n+  let s = seed | 0;\n+  return function(): number {\n+    s |= 0;\n+    s = s + 0x6D2B79F5 | 0;\n+    let t = Math.imul(s ^ s >>> 15, 1 | s);\n+    t = t + Math.imul(t ^ t >>> 7, 61 | t) ^ t;\n+    return ((t ^ t >>> 14) >>> 0) / 4294967296;\n+  };\n+}\n+\n+export function randomInt(rng: () => number, min: number, max: number): number {\n+  return min + Math.floor(rng() * (max - min + 1));\n+}\n+\n+export function randomChoice<T>(rng: () => number, array: T[]): T {\n+  return array[Math.floor(rng() * array.length)];\n+}","metadata":{"quality":"gold","difficulty":"hard","concepts":["mulberry32","PRNG","determinism","generics"]}}
{"task_id":"task_09","variant":"correct_simple_lcg","input_prompt":"Implement seeded random number generator.","expected_output":"Uses simpler LCG algorithm instead of mulberry32 but still deterministic","metadata":{"quality":"gold","difficulty":"hard","concepts":["LCG","alternative_PRNG"]}}
{"task_id":"task_09","variant":"math_random","input_prompt":"Add random functions for game.","expected_output":"--- /dev/null\n+++ b/src/systems/rng.ts\n@@ -0,0 +1,10 @@\n+export function createRNG(seed: number) {\n+  return () => Math.random();\n+}","metadata":{"quality":"bad","difficulty":"hard","error_type":"not_deterministic","description":"Uses Math.random() - not seeded, not deterministic"}}
{"task_id":"task_09","variant":"off_by_one","input_prompt":"Create deterministic RNG with seed.","expected_output":"--- /dev/null\n+++ b/src/systems/rng.ts\n@@ -0,0 +1,10 @@\n+export function randomInt(rng, min, max) {\n+  return min + Math.floor(rng() * (max - min));\n+}","metadata":{"quality":"bad","difficulty":"hard","error_type":"off_by_one","description":"randomInt excludes max (should be inclusive)"}}
{"task_id":"task_09","variant":"no_generic","input_prompt":"Build PRNG module.","expected_output":"Implements mulberry32 correctly but randomChoice doesn't use generics, typed as any[]","metadata":{"quality":"partial","difficulty":"hard","error_type":"weak_typing","description":"Works but loses type safety on randomChoice"}}
{"task_id":"task_10","variant":"correct_basic","input_prompt":"Add validateSettings(settings) to gameState.ts. Validate difficulty 1-10 (default 5), soundVolume 0-1 (default 0.8), musicVolume 0-1 (default 0.6), showFps boolean (default false).","expected_output":"--- a/src/core/gameState.ts\n+++ b/src/core/gameState.ts\n@@ -130,3 +130,28 @@\n+\n+export function validateSettings(settings: Partial<GameSettings>): GameSettings {\n+  const defaults: GameSettings = {\n+    difficulty: 5,\n+    soundVolume: 0.8,\n+    musicVolume: 0.6,\n+    showFps: false,\n+  };\n+\n+  const difficulty = typeof settings.difficulty === 'number'\n+    && settings.difficulty >= 1 && settings.difficulty <= 10\n+    ? settings.difficulty : defaults.difficulty;\n+\n+  const soundVolume = typeof settings.soundVolume === 'number'\n+    && settings.soundVolume >= 0 && settings.soundVolume <= 1\n+    ? settings.soundVolume : defaults.soundVolume;\n+\n+  const musicVolume = typeof settings.musicVolume === 'number'\n+    && settings.musicVolume >= 0 && settings.musicVolume <= 1\n+    ? settings.musicVolume : defaults.musicVolume;\n+\n+  const showFps = typeof settings.showFps === 'boolean'\n+    ? settings.showFps : defaults.showFps;\n+\n+  return { difficulty, soundVolume, musicVolume, showFps };\n+}","metadata":{"quality":"gold","difficulty":"medium","concepts":["validation","type_checking","safe_defaults","defensive_programming"]}}
{"task_id":"task_10","variant":"correct_compact","input_prompt":"Implement settings validation with safe defaults.","expected_output":"Uses helper function for range validation, more DRY approach","metadata":{"quality":"gold","difficulty":"medium","concepts":["DRY","helper_functions"]}}
{"task_id":"task_10","variant":"no_type_check","input_prompt":"Validate game settings.","expected_output":"--- a/src/core/gameState.ts\n+++ b/src/core/gameState.ts\n@@ -130,3 +130,15 @@\n+export function validateSettings(settings: Partial<GameSettings>): GameSettings {\n+  return {\n+    difficulty: Math.min(10, Math.max(1, settings.difficulty ?? 5)),\n+    soundVolume: Math.min(1, Math.max(0, settings.soundVolume ?? 0.8)),\n+    musicVolume: Math.min(1, Math.max(0, settings.musicVolume ?? 0.6)),\n+    showFps: settings.showFps ?? false,\n+  };\n+}","metadata":{"quality":"partial","difficulty":"medium","error_type":"no_type_check","description":"Clamps values but doesn't check types (string '5' would pass)"}}
{"task_id":"task_10","variant":"throws_error","input_prompt":"Add settings validation function.","expected_output":"--- a/src/core/gameState.ts\n+++ b/src/core/gameState.ts\n@@ -130,3 +130,10 @@\n+export function validateSettings(settings: Partial<GameSettings>): GameSettings {\n+  if (settings.difficulty < 1 || settings.difficulty > 10) throw new Error('Invalid difficulty');\n+  ...","metadata":{"quality":"bad","difficulty":"medium","error_type":"throws_instead_of_defaults","description":"Throws errors instead of replacing with safe defaults"}}
{"task_id":"task_10","variant":"incomplete","input_prompt":"Create settings validator.","expected_output":"Only validates difficulty and soundVolume, ignores musicVolume and showFps","metadata":{"quality":"partial","difficulty":"medium","error_type":"incomplete_validation","description":"Doesn't validate all fields"}}
